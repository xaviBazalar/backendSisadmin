
<!-- TABLERO -->

<div class="container mt-5">

    
    <h2>TABLERO</h2>
    <form action="">


        <div class="row">

            <div class="col-3">
                <select id="gerencia" class="form-select" aria-label="Default select example">
                    <option value="">..Seleccionar Gerencia</option>
                    <option value="{{item._id}}" *ngFor="let item of listaGerencias">{{item.nombre_gerencia}}</option>
                </select>
            </div>
            <div class="col-3">
                <select id="tarea" class="form-select" aria-label="Default select example">
                    <option value="">..Seleccionar Tarea</option>
                    <option value="{{item._id}}" *ngFor="let item of listatareas">{{item.nombre_tarea}}</option>
                </select>
            </div>
            <div class="col-3">
                <select id="perfil" class="form-select" aria-label="Default select example">
                    <option value="">..Seleccionar Persona</option>
                    <option value="{{item._id}}" *ngFor="let item of listaUsuariosGST">{{item.nombre}}</option>
                </select>
            </div>
            <div class="col-3">
                <button type="button" class="btn btn-success px-5" (click)="filterList()">Filtrar</button>
           </div>
               
        </div>



        <div class="row my-3">

            <div class="col-3">
                <select id="estado_solicitud" class="form-select" aria-label="Default select example">
                    <option value="">..Seleccionar Estado Solicitud</option>
                    <option value="{{item._id}}" *ngFor="let item of listaEstadoSolicitud">{{item.nombre_estado}}</option>
                </select>
            </div>
            <div class="col-3">
                <select id="estado_resultado" class="form-select" aria-label="Default select example">
                    <option value="">..Seleccionar Estado Resultado</option>
                    <option value="{{item._id}}" *ngFor="let item of listaEstadoResultado">{{item.nombre_resultado}}</option>
                </select>
            </div>
            
        </div>
               



        
        



    </form>
    <hr>
    
    <div class="row">
        <div style="cursor: pointer;" class="col-3 py-2 mr-2" *ngFor="let solicitud of listaSolicitudes" (click)="goToSolicitud(solicitud._id)">
            <div class="card" style="width: 18rem;">
                <div [ngStyle]="{
                    'background-color':solicitud.estado_solicitud.nombre_estado === 'Por Hacer' ? 
                    '#f3f3f3' : solicitud.estado_solicitud.nombre_estado === 'En Proceso'? 
                    '#ffeed0': solicitud.estado_solicitud.nombre_estado === 'Terminada'?'#d6eace':'#e4c1eb'}" class="card-body">
                  <h4 style="font-weight:300;" class="card-title">{{solicitud.estado_solicitud.nombre_estado}}</h4>
                  <h5 style="font-weight:200;" class="card-subtitle mb-2 text-muted">{{solicitud.tarea.nombre_tarea}}</h5>
                </div>
                <div  class="card-body">
                    <h5 class="card-subtitle mb-2 text-muted">{{solicitud.contrato.contrato}}-{{solicitud.contrato.contradoid}}</h5>
                    <h6 class="card-subtitle mb-2 text-muted">{{solicitud.gerencia.nombre_gerencia}}</h6><!--Contrato Mina-->
                </div>
                <div class="card-body" >
                    <p class="card-text text-muted ">{{solicitud.fecha_inicio}} @ {{solicitud.fecha_entrega}}</p>
                    <p class="card-text text-muted" *ngIf="solicitud.observacion==''">Sin Observaciones</p>
                    <p class="card-text text-muted" *ngIf="solicitud.observacion!=''">{{solicitud.observacion}}</p>
                    <p class="card-text text-muted">{{solicitud.gst.nombre}}</p>
                </div>
                <div class="card-tablero card-body card-resultado">
                    <p>RESULTADO</p>
                    <button [ngStyle]="{'color':'#fff','border':'none','font-weight':'300','background-color':solicitud.estado_resultado.nombre_resultado === 'En Espera' ? '#ff8352' : solicitud.estado_resultado.nombre_resultado === 'Pendiente'? '#3e8af7': '#72bb53'}"  type="button" class="btn btn-warning mx-auto">{{solicitud.estado_resultado.nombre_resultado}}</button>
                </div>
            </div>
        </div>
        


    </div>
</div>